@import 'bootstrap';
@import 'blacklight/blacklight';
@import 'blacklight_marc';

i {
    font-family: "bootstrap-icons" !important;
}
.show-document {
    width:100%;
}
.main-container > .row {
    flex-direction: column !important;
}
.dl-invert dt {
    text-align: left !important;
}
.document-metadata {
    dt {
        max-width: 300px;
    }
    p {
        margin-bottom: 0 !important;
    }
}
.document-main-section {
    margin-top: 1rem;
    .document-record-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .doc-record-title {
        padding: 0;
        margin: 0;
    }
}

.page-sidebar[aria-label="Tools"], .page-sidebar[aria-label="Outils"] {
    width: 100%;
    .card {
        border: none;
    }
    .card .card-header {
        background-color: white;
        padding: var(--bs-card-cap-padding-y) 0;
        border: none !important;
    }
    .card .list-group-item {
        padding: var(--bs-list-group-item-padding-y) 0;
    }
    h2, .h2 {
        font-size: calc(1.325rem + 0.9vw)  !important;
    }
    @media (min-width: 1200px) {
        h2, .h2 {
            font-size: 2rem !important;
        }
    }
}
/* Hide separate sidebar Tools; links live in the Toolbox card to avoid duplication */
.blacklight-catalog-show .page-sidebar[aria-label="Tools"],  .blacklight-catalog-show .page-sidebar[aria-label="Outils"] { display: none; }

/* Make show page content span full page width (mobile only; see block at bottom) */
@media only screen and (max-width: 1024px) {
    .document-main-section {
        max-width: 66vw !important;
    }
}

#collection-items-list {
    padding: 0;
}
#collection-items-list .card {
    padding: 0;
}

.page-sidebar {
    .endnote, .refworks {
        display: none; /* TODO: find how to disable in src code */
    }
}

/* Sidebar styles */
#toggle-menu {
    position: sticky;
    top: 0;                /* stick to the top of the viewport */
    height: 100vh;         /* full height sidebar */
    overflow-y: auto;      /* scroll within sidebar if content too tall */
    transform: translateX(0); 
    transition: transform 0.3s ease-in-out;
    max-width: 350px;
    /*border: 1px solid rgba(0, 0, 0, 0.175);*/
    background-color: #fff; /* to cover content underneath */
    z-index: 1020;          /* keep above main content when sliding */
    padding-left: 0 !important;
    padding-top: 1rem !important;
    overflow-wrap: break-word;
}

button i {
    font-size: 24px;
    color: #707070;
}

@media (max-width: 1350px) {
    #toggle-menu {
        max-width: 250px;
    }
}
/* When sidebar is collapsed, slide it out to the left */
#toggle-menu:not(.show) {
    transform: translateX(-100%);
}

/* Ensure main content adjusts */
#doc-main {
    transition: margin-left 0.3s ease-in-out;
    margin: 0.5rem 0 0 0 !important;
    padding: 0 !important;
        position: relative;
}

#doc-main #collection-items-list { 
    margin-left:0.5rem;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  /* Make show page take full width on mobile */
  .blacklight-catalog-show #main-container.container {
    max-width: 100% !important;
    width: 100% !important;
    padding-left: .75rem; padding-right: .75rem;
  }
  .blacklight-catalog-show .document-main-section { max-width: 100% !important; }
    /* Reflow details + viewer vertically on mobile */
    #document-togglable-content .row { flex-wrap: wrap !important; }
    #document-togglable-content .row.flex-nowrap { flex-wrap: wrap !important; }
    /* Each section (details + viewer) should consume full row */
    #document-togglable-content #toggle-menu,
    #document-togglable-content #doc-main {
        flex: 0 0 100% !important;
        max-width: 100% !important;
    }
    /* Show viewer first, then details */
    #document-togglable-content #doc-main { order: 1 !important; }
    #document-togglable-content #toggle-menu { order: 2 !important; }
    #toggle-menu {
        position: relative !important;
        top: auto; height: auto; transform: none !important;
        width: 100%; min-width: auto; max-width: none;
        z-index: 1; /* sit under any floating viewer UI */
        box-shadow: 0 4px 16px rgba(0,0,0,.06);
        border-radius: 8px;
        margin-bottom: .75rem;
        overflow: visible !important; /* remove inner scrolling on mobile */
    }
    /* When collapsed, hide the details card entirely */
    #toggle-menu.collapse:not(.show) { display: none !important; }
    #doc-main { margin: 0 !important; padding: 0 !important; width: 100%; }
    /* viewer height on small screens */
    #doc-main #my-mirador, .mirador-osd-container { min-height: 60vh; width: 100% !important; }
    /* ensure inner mirador wrappers stretch full width */
    #doc-main .mirador-viewer, #doc-main .viewer-wrap, #doc-main .mirador-mosaic, #doc-main .mosaic-root {
        width: 100% !important;
    }

    /* Hide collapse toggle buttons on mobile */
    #toggle-doc-metadata1,
    #toggle-doc-metadata2,
    #toggle-doc-metadata3 { display: none !important; }
}

/* Strong mobile overrides placed at end to beat earlier rules */
@media (max-width: 768px) {
  #document-togglable-content #toggle-menu { height: auto !important; overflow: visible !important; }
  .blacklight-catalog-show .document-main-section { max-width: 100% !important; }
}
#toggle-doc-metadata2[aria-expanded="true"], #toggle-doc-metadata3[aria-expanded="true"] {
    display:none !important;
}

#toggle-doc-metadata2, #toggle-doc-metadata3 {
    /*position: absolute;
    z-index: 1000;
    left: -70px;
    top:0.2rem;*/
    display: flex;
    align-items: center;
    margin-left: 0.1rem;
    margin-bottom: 0rem;
    span {
        margin-left:0.5rem;
    }
}
#toggle-doc-metadata3 {
    margin-left: 0.5rem;
    margin-bottom: 0.5rem;
}
#download-toolbar {
    margin-bottom: 0.5rem;
}
#download-toolbar .btn {
    font-size: 0.95rem;
    padding: 0.45rem 0.9rem;
    border-radius: 999px;
    line-height: 1.2;
}
#download-toolbar .btn i {
    font-size: 1rem;
}
#download-toolbar .btn.disabled,
#download-toolbar .btn[aria-disabled="true"] {
    cursor: not-allowed;
    opacity: 0.6;
}
#download-toolbar .btn,
.toolbox-actions .btn {
    box-shadow: none;
}
#document-togglable-content {
    background-color: white;
    border-radius: 7px;
}
#document-togglable-content #toggle-menu {
    /*height: 90vh;*/
    overflow-y: auto; 
} 

#document-togglable-content #toggle-menu {
    height: 100vh;
    border-radius: 7px;
}

#toggle-menu {
    .document-metadata dt,
    .document-metadata dd {
    display: block;   /* stack instead of inline/grid */
    width: 100%;      /* full width */
    margin: 0;        /* reset Bootstrap spacing */
    }

    .document-metadata dt {
    font-weight: bold; /* optional, to keep label distinct */
    margin-top: 1em;   /* add spacing before each section */
    }
}

.document-sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.btn-outline-custom {
    border: 1px solid rgba(0, 0, 0, 0.175);
}
.btn-outline-custom:hover {
    background-color: rgba(0, 0, 0, 0.175);
}

.card, .card-img-top {
    div[title="Zoom in"] img,
    div[title="Zoom out"] img,
    div[title="Go home"] img,
    div[title="Toggle full page"] img,
    div[title="Previous page"] img,
    div[title="Next page"] img {
        display: none !important;
    }

    // Common toolbar button styles
    div[title="Zoom in"],
    div[title="Zoom out"],
    div[title="Go home"],
    div[title="Toggle full page"],
    div[title="Previous page"],
    div[title="Next page"] {
        cursor: pointer !important;
        position: relative; // needed for ::before positioning
        height: 52px; // larger hit target
        width: 52px;
        font-family: "bootstrap-icons" !important;
        border-radius: 12px;
        margin: 4px; // spacing between buttons
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background-color: rgba(255, 255, 255, 0.98);
        border: 1px solid rgba(0, 0, 0, 0.08);
        box-shadow: none;
        transition: background-color .12s ease, box-shadow .12s ease, transform .06s ease, color .12s ease;
        outline: none;

        &::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 28px;
            height: 28px;
            transform: translate(-50%, -50%);
            pointer-events: none; // donâ€™t block clicks
            color: #1f2937 !important; // higher contrast icon
            font-size: 24px;
            line-height: 1;
        }

        &:hover {
            background-color: #ffffff;
            box-shadow: none;
        }
        &:active { transform: translateY(1px); }
        &:focus-visible {
            box-shadow: 0 0 0 3px rgba(0, 95, 204, 0.35), 0 6px 18px rgba(0, 0, 0, 0.2);
        }
    }

    // Individual icons
    div[title="Zoom in"]::before {
        content: "\f64d"; // bi-zoom-in
    }

    div[title="Zoom out"]::before {
        content: "\f63b";
    }

    div[title="Go home"]::before {
        content: "\f425";
    }

    div[title="Toggle full page"]::before {
        content: "\f14a";
    }

    div[title="Previous page"]::before {
        content: "\f12f";
    }

    div[title="Next page"]::before {
        content: "\f138";
    }

    // Fullscreen override icon
    .card-img-top.fullpage div[title="Toggle full page"]::before, .mirador-osd-container.fullpage div[title="Toggle full page"]::before {
        content: "\f149";
    }

    // Style toolbar container
    .openseadragon-canvas + div {
        top: calc(100% - 80px) !important;
        border-radius: 50px !important;
        overflow: visible !important;
        margin: 0.5rem !important;
        /* ensure the group wrappers are fully opaque and neatly laid out */
        display: flex !important;
        flex-wrap: nowrap !important; /* keep toolbar on one row */
        gap: 10px;
        align-items: center;
        /* drop shadow to lift from the image */
        filter: drop-shadow(0 6px 18px rgba(0,0,0,.18));
        > div {
            background-color: rgba(255, 255, 255, 0.98) !important;
            border: 1px solid rgba(0,0,0,.08);
            border-radius: 999px !important;
            padding: 6px !important;
            display: flex !important;
            gap: 4px;
            align-items: center;
            opacity: 1 !important; // override inline 0.552
        }
    }

    /* Tablet: slightly smaller controls and tighter layout */
    @media (max-width: 1024px) {
        .openseadragon-canvas + div {
            top: auto !important;           /* anchor using bottom for stability */
            bottom: 10px !important;
            margin: 0.35rem !important;
            gap: 8px;
        }
        div[title="Zoom in"],
        div[title="Zoom out"],
        div[title="Go home"],
        div[title="Toggle full page"],
        div[title="Previous page"],
        div[title="Next page"] {
            height: 42px;
            width: 42px;
            margin: 2px; /* reduce outer spacing */
            &::before { width: 22px; height: 22px; font-size: 20px; }
        }
        .openseadragon-canvas + div > div { padding: 4px !important; }
    }

    /* Mobile: compact controls to avoid wrapping/overlap */
    @media (max-width: 576px) {
        .openseadragon-canvas + div {
            bottom: 8px !important;
            margin: 0.25rem !important;
            gap: 6px;
        }
        div[title="Zoom in"],
        div[title="Zoom out"],
        div[title="Go home"],
        div[title="Toggle full page"],
        div[title="Previous page"],
        div[title="Next page"] {
            height: 36px;
            width: 36px;
            margin: 2px;
            &::before { width: 20px; height: 20px; font-size: 18px; }
        }
        .openseadragon-canvas + div > div { padding: 3px !important; }
    }

    // Make disabled nav (often inline-styled with low opacity) clearly disabled
    div[title="Previous page"][style*="opacity: 0.2"],
    div[title="Next page"][style*="opacity: 0.2"] {
        cursor: not-allowed !important;
        filter: grayscale(100%);
    }

    // Bigger targets on touch devices
    @media (pointer: coarse) {
        div[title="Zoom in"],
        div[title="Zoom out"],
        div[title="Go home"],
        div[title="Toggle full page"],
        div[title="Previous page"],
        div[title="Next page"] {
            height: 56px;
            width: 56px;
            &::before { font-size: 26px; }
        }
    }
}
.MuiChip-icon:before {
    line-height: 1.8 !important;
}
.members-section .chip-filter {
    display: flex !important;
}
